<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="에디슨 워크벤치 기발 에디터(Pre-Processor)를 개발하기 위한 프로젝트 생성 및 기본 설정에 대한 매뉴얼">
<meta name="keywords" content="workbencheditor,  ">
<title>Wrapper 파일 | EDISON platform for documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="sp-edison.github.io" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> EDISON Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">User<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="user_intro.html">EDISON 포털</a></li>
                        
                        
                        
                        <li><a href="mat_intro.html">소재 특화 사이트</a></li>
                        
                        
                        
                        <li><a href="ai_intro.html">인공지능 특화 사이트</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Manager<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="sitemanager1.html">사이트 관리자</a></li>
                        
                        
                        
                        <li><a href="portalmanager1.html">포털 관리자</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">System Admin<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="">Liferay</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="solverdev_intro.html">Solver</a></li>
                        
                        
                        
                        <li><a href="workbenchsetting1.html">Workbench</a></li>
                        
                        
                        
                        <li><a href="datadev_view_manage.html">Simulation Data</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:edison@kisti.re.kr?subject=EDISON documentation feedback&body=I have some feedback about the Wrapper 파일 page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Need help?</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Wrapper 파일">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Workbench Dev 1.0</li>
  
  
  
    
  
  <li>
      <a href="#">개발 환경 구성</a>
      <ul>
          
          
          
          <li><a href="workbenchsetting1.html">Lifeary 6.2 설치 파일 다운로드</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting2.html">Lifeary IDE 설치</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting3.html">Developer Studion 실행</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting4.html">JDK 1.7 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting5.html">tomcat 서버 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting6.html">ANT 1.9 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbenchsetting7.html">SDK 설정</a></li>
          
          
          
          
      </ul>
   </li>
    
    
  
  <li>
      <a href="#">워크벤치 편집기 개발</a>
      <ul>
          
          
          
          <li><a href="workbench_editorguide1.html">프로젝트 생성</a></li>
          
          
          
          
          
          
          <li><a href="workbench_editorguide2.html">자바 파일 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbench_editorguide3.html">포틀릿 xml 파일 설정</a></li>
          
          
          
          
          
          
          <li class="active"><a href="workbench_editorguide4.html">visualizer_wrapper 파일 설정</a></li>
          
          
          
          
      </ul>
   </li>
    
    
  
  <li>
      <a href="#">워크벤치 분석기 개발</a>
      <ul>
          
          
          
          <li><a href="workbench_analyzerguide1.html">프로젝트 생성</a></li>
          
          
          
          
          
          
          <li><a href="workbench_analyzerguide2.html">자바 파일 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbench_analyzerguide3.html">포틀릿 xml 파일 설정</a></li>
          
          
          
          
          
          
          <li><a href="workbench_analyzerguide4.html">Wrapper 파일</a></li>
          
          
          
          
          
          
          <li><a href="workbench_analyzerguide5.html">가시화 파일 설정</a></li>
          
          
          
          
      </ul>
   </li>
    
    
  
  <li>
      <a href="#">워크벤치 이벤트 정의</a>
      <ul>
          
          
          
          <li><a href="event_handshake.html">HANDSHAKE</a></li>
          
          
          
          
          
          
          <li><a href="event_registerd.html">REGISTERED</a></li>
          
          
          
          
          
          
          <li><a href="event_requestdata.html">REQUESTDATA</a></li>
          
          
          
          
          
          
          <li><a href="even_responsedata.html">RESPONSEDATA</a></li>
          
          
          
          
          
          
          <li><a href="event_loaddata.html">LOADDATA</a></li>
          
          
          
          
          
          
          <li><a href="event_initialize.html">INITIALIZE</a></li>
          
          
          
          
          
          
          <li><a href="event_refreshoutputview.html">REFRESHOUTPUTVIEW</a></li>
          
          
          
          
          
          
          <li><a href="event_datachanged.html">DATACHANGED</a></li>
          
          
          
          
      </ul>
   </li>
    
    
    
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Wrapper 파일</h1>
</div>



<div class="post-content">

   
    <div class="summary">에디슨 워크벤치 기발 에디터(Pre-Processor)를 개발하기 위한 프로젝트 생성 및 기본 설정에 대한 매뉴얼</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

   <p><a href="https://edison.re.kr">EDISON</a> 워크벤치 기반 전처리기(Pre-Processor) 개발 매뉴얼 입니다.</p>

<p>Liferay 6.2.5 포틀릿 기반으로 개발 하는 방법에 대해 순차적으로 설명 되어 있습니다.</p>

<h2 id="1-initjsp-파일-설정">1. init.jsp 파일 설정</h2>
<p>공통적으로 사용되는 태그라이브러리들을 설정합니다.
포틀릿에서 사용되는 공용 태그 라이브러리 및 포틀릿관련 오브젝트들을 사용할 수 있도록 설정을 추가합니다.
<code class="highlighter-rouge">/html/</code>폴더에 <code class="highlighter-rouge">init.jsp</code>파일을 추가하고 아래와 같은 코드를 추가합니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://java.sun.com/portlet_2_0"</span> <span class="na">prefix=</span><span class="s">"portlet"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://alloy.liferay.com/tld/aui"</span> <span class="na">prefix=</span><span class="s">"aui"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://liferay.com/tld/ui"</span> <span class="na">prefix=</span><span class="s">"liferay-ui"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://liferay.com/tld/theme"</span> <span class="na">prefix=</span><span class="s">"theme"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://java.sun.com/jsp/jstl/core"</span> <span class="na">prefix=</span><span class="s">"c"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://liferay.com/tld/security"</span> <span class="na">prefix=</span><span class="s">"liferay-security"</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://liferay.com/tld/portlet"</span> <span class="na">prefix=</span><span class="s">"liferay-portlet"</span> <span class="err">%</span><span class="nt">&gt;</span>

<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://java.sun.com/jsp/jstl/fmt"</span> <span class="na">prefix=</span><span class="s">"fmt"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">taglib</span> <span class="na">uri=</span><span class="s">"http://java.sun.com/jsp/jstl/functions"</span> <span class="na">prefix=</span><span class="s">"fn"</span><span class="err">%</span><span class="nt">&gt;</span>


<span class="nt">&lt;portlet:defineObjects</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;theme:defineObjects</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<h2 id="2-visualizer_wrapperjsp-파일-코드-설정">2. visualizer_wrapper.jsp 파일 코드 설정</h2>

<p>visualizer_wrapper.jsp 파일은 워크벤치 시뮬레이션 서비스와 연계되어 데이터를 주고받고, 사용자 입력 데이터를 서버 시뮬레이션 서비스에 전송하는 컨트롤 부분을 담당하고 있다.
워크벤치 시뮬레이션 서비스에서 사용자의 이벤트에 따라 이벤트를 전송하고, 이벤트를 주고 받는 부분을 담당하고 있습니다.<br /></p>

<h3 id="21-기본-설정">2.1. 기본 설정</h3>
<p>처음으로 워크벤치 시뮬레이션 서비스와 연계되어 데이터를 주고 받거나 시뮬레이션 데이터를 전송 하기 위해서는 아래와 같이 <code class="highlighter-rouge">OSPVisualizerUtil</code>과 <code class="highlighter-rouge">OSPVisualizerConfig</code>의 라이브러리들을 가져와야 합니다.
<code class="highlighter-rouge">OSPVisualizerUtil</code>과 <code class="highlighter-rouge">OSPVisualizerConfig</code>에서는 워크벤치 시뮬레이션 서비스에서 제공하는 다양한 이벤트와 이벤트 처리 함수가 정의되어 있으며, 해당 부분을 <code class="highlighter-rouge">import</code> 하기만 하면 시뮬레이션 서비스와 연계되어 사용자에게 가시화 하는 모듈을 제공할 수 있습니다.<br />
또한 이전 단계에서 정의한 포틀릿의 구성 정보를 지정하여 포틀릿의 너비와 높이, 메뉴 선택 등을 설정할 수 있습니다. 아무런 값이 지정되어 있지 않다면 기본적으로 제공되는 기본 설정이 포틀릿 구성정보로 지정되며, 워크벤치와 연동되어 동작을 할 때에는 워크벤치에서 지정한 값으로 구성 정보가 지정됩니다.<br />
코드를 확인하면 다음과 같습니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="err">%@</span><span class="na">page</span> <span class="na">import=</span><span class="s">"com.kisti.osp.util.OSPVisualizerUtil"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span><span class="na">page</span> <span class="na">import=</span><span class="s">"com.kisti.osp.util.OSPVisualizerConfig"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span><span class="na">include</span> <span class="na">file=</span><span class="s">"../init.jsp"</span><span class="err">%</span><span class="nt">&gt;</span>

<span class="nt">&lt;portlet:resourceURL</span> <span class="na">var=</span><span class="s">"serveResourceURL"</span><span class="nt">&gt;&lt;/portlet:resourceURL&gt;</span>
<span class="nt">&lt;</span><span class="err">%</span>
<span class="na">OSPVisualizerConfig</span> <span class="na">visualizerConfig =</span><span class="err"> </span><span class="s">OSPVisualizerUtil.getVisualizerConfig(renderRequest,</span> <span class="na">portletDisplay</span><span class="err">,</span> <span class="na">user</span><span class="err">);</span>
<span class="err">%</span><span class="nt">&gt;</span>
</code></pre></div></div>

<h3 id="22-iframe-설정">2.2. iframe 설정</h3>
<p>실제 가시화를 담당하는 부분은 사용자에게 시뮬레이션 결과 데이터를 워크벤치 서비스에서 전송받아 데이터를 가시화 하는 모듈을 포함하고 있습니다.
후처리기 가시화 모듈을 지정하는 부분은 <code class="highlighter-rouge">&lt;iframe&gt;</code> 태그 안에 존재하고 있습니다. <br />
위에 <code class="highlighter-rouge">html</code> 태그들은 워크벤치 시뮬레이션 서비스와 호환되기 위해 스타일 이미지들을 지정한 내용입니다. 또한 워크벤치 시뮬레이션 서비스와 연계되기 위해 메뉴로 지정되는 부분은 
<code class="highlighter-rouge">id="&lt;portlet:namespace/&gt;menu"</code> 태그 안에 포함되어 있다.</p>

<p>메뉴의 대한 설명은 다음의 표와 같습니다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">메뉴명</th>
      <th style="text-align: left">동작 기능</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">sample</td>
      <td style="text-align: left">시뮬레이션에 지정된 샘플데이터를 가져와 시뮬레이션 입력으로 선택함</td>
    </tr>
    <tr>
      <td style="text-align: left">Open local file</td>
      <td style="text-align: left">사용자의 로컬 컴퓨터 파일을 가져오기 위한 파일 익스플로러 선택</td>
    </tr>
    <tr>
      <td style="text-align: left">Open Server file</td>
      <td style="text-align: left">서버 파일의 리스트를 보여주는 서버 파일 익스플로러가 실행 됨</td>
    </tr>
    <tr>
      <td style="text-align: left">Save</td>
      <td style="text-align: left">현재 편집한 내용을 서버 내 시뮬레이션 입력으로 저장함</td>
    </tr>
    <tr>
      <td style="text-align: left">Save as…</td>
      <td style="text-align: left">현재 편집한 내용을 서버 내 시뮬레이션 입력으로 새로운 이름을 지정하여 저장함</td>
    </tr>
    <tr>
      <td style="text-align: left">Save at local</td>
      <td style="text-align: left">현재 편집한 내용을 로컬 사용자의 컴퓨터에 저장함</td>
    </tr>
    <tr>
      <td style="text-align: left">Download</td>
      <td style="text-align: left">현재 데이터를 다운로드함</td>
    </tr>
  </tbody>
</table>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-fluid osp-visualizer"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row-fluid osp-header"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-10"</span><span class="nt">&gt;</span>
	  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;title"</span> <span class="na">class=</span><span class="s">"osp-title"</span><span class="nt">&gt;&lt;/div&gt;</span>
	  <span class="nt">&lt;/div&gt;</span>
	  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2 osp-menu"</span>  <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;menu"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"dropdown text-right"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary dropdown-toggle"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">data-toggle=</span><span class="s">"dropdown"</span><span class="nt">&gt;</span>
				Menu<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"caret"</span><span class="nt">&gt;&lt;/span&gt;</span>
   			<span class="nt">&lt;/button&gt;</span>
			<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"dropdown-menu dropdown-menu-right"</span><span class="nt">&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;sample"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Sample<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;openLocalFile"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Open local file<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;openServerFile"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Open Server file<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;save"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;saveAs"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save as...<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;saveAtLocal"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save at local<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;download"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-download-alt"</span><span class="nt">&gt;&lt;/i&gt;</span> Download<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>					
			<span class="nt">&lt;/ul&gt;</span>
		 <span class="nt">&lt;/div&gt;</span>
	  <span class="nt">&lt;/div&gt;</span>	
	<span class="nt">&lt;/div&gt;</span>

 <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row-fluid osp-frame"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;iframe</span> 
		<span class="na">class=</span><span class="s">"col-sm-12 osp-iframe-canvas"</span>  
		<span class="na">style=</span><span class="s">"&lt;%=visualizerConfig.getDisplayStyle()%&gt;border:solid #eeeeee 1px;"</span> 
		<span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;canvas"</span> 
		<span class="na">src=</span><span class="s">"&lt;%=request.getContextPath()%&gt;/html/TextEditor/text-editor.jsp"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;/iframe&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h3 id="23-script-내-글로벌-변수-설정">2.3. script 내 글로벌 변수 설정</h3>

<p>다음 코드는 자바 스크립트 내의 기본값을 설정하는 부분입니다.
<code class="highlighter-rouge">&lt;portlet:namespace/&gt;config</code>는 <code class="highlighter-rouge">JSON</code>형태를 지정하는 부분으로 기본적인 워크벤치 시뮬레이션 서비스와 연동되어 설정되어야 하는 데이터 내부 소스를 포함하고 있습니다.
내용을 정리하면 다음과 같습니다.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">객체명</th>
      <th style="text-align: left">동작 기능</th>
      <th style="text-align: left">기본 값</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">namespace</td>
      <td style="text-align: left">포틀릿 고유의 아이디를 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">'&lt;portlet:namespace/&gt;'</code></td>
    </tr>
    <tr>
      <td style="text-align: left">displayCanvas</td>
      <td style="text-align: left">그림을 그리는 부분인 iframe 아이디를 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">&lt;portlet:namespace/&gt;canvas </code></td>
    </tr>
    <tr>
      <td style="text-align: left">portletId</td>
      <td style="text-align: left">포틀릿의 아이디를 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">'&lt;%=portletDisplay.getId()%&gt;' </code></td>
    </tr>
    <tr>
      <td style="text-align: left">connector</td>
      <td style="text-align: left">앞서 설정한 visualizerConfig 값 연결 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">'&lt;%=visualizerConfig.connector%&gt;' </code></td>
    </tr>
    <tr>
      <td style="text-align: left">menuOptions</td>
      <td style="text-align: left">사용하려는 메뉴를 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">JSON.parse('&lt;%=visualizerConfig.menuOptions%&gt;') </code></td>
    </tr>
    <tr>
      <td style="text-align: left">resourceURL</td>
      <td style="text-align: left">파일 전송을 위한 serveResourceUrl 값 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">'&lt;%=serveResourceURL%&gt;'</code></td>
    </tr>
    <tr>
      <td style="text-align: left">eventHandlers</td>
      <td style="text-align: left">사용하려는 이벤트 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">'OSP_LOAD_DATA', 'OSP_RESPONSE_DATA', 'OSP_INITIALIZE'</code></td>
    </tr>
    <tr>
      <td style="text-align: left">loadCanvas</td>
      <td style="text-align: left">워크벤치와 호환되어 파일을 읽어오기 위한 함수 설정</td>
      <td style="text-align: left"><code class="highlighter-rouge">&lt;portlet:namespace/&gt;loadCanvas</code></td>
    </tr>
    <tr>
      <td style="text-align: left">procFuncs</td>
      <td style="text-align: left">개발자가 임의로 지정한 함수/visualizer 함수보다 우선순위를 가짐</td>
      <td style="text-align: left"><code class="highlighter-rouge">readServerFile: function( jsonData ) </code></td>
    </tr>
  </tbody>
</table>

<p>두 번째로 <code class="highlighter-rouge">visaalizer</code>라이브러리에서 제공하는 기본적인 값들을 설정하는 부분이 포함되어 있습니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//***********************************************************************
 * Global variables and initialization section
 ***********************************************************************/
 console.log( '== LIFERAY ==', Liferay );
 
var <span class="nt">&lt;portlet:namespace/&gt;</span>canvas = document.getElementById('<span class="nt">&lt;portlet:namespace/&gt;</span>canvas');
var <span class="nt">&lt;portlet:namespace/&gt;</span>disabled = JSON.parse( '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">visualizerConfig</span><span class="err">.</span><span class="na">disabled</span><span class="err">%</span><span class="nt">&gt;</span>');

var <span class="nt">&lt;portlet:namespace/&gt;</span>config = {
			namespace: '<span class="nt">&lt;portlet:namespace/&gt;</span>',
			displayCanvas: <span class="nt">&lt;portlet:namespace/&gt;</span>canvas,
			portletId: '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">portletDisplay</span><span class="err">.</span><span class="na">getId</span><span class="err">()%</span><span class="nt">&gt;</span>',
			connector: '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">visualizerConfig</span><span class="err">.</span><span class="na">connector</span><span class="err">%</span><span class="nt">&gt;</span>',
			menuOptions: JSON.parse('<span class="nt">&lt;</span><span class="err">%=</span><span class="na">visualizerConfig</span><span class="err">.</span><span class="na">menuOptions</span><span class="err">%</span><span class="nt">&gt;</span>'), 
			resourceURL: '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">serveResourceURL</span><span class="err">%</span><span class="nt">&gt;</span>',
			eventHandlers: {
					'OSP_LOAD_DATA': <span class="nt">&lt;portlet:namespace/&gt;</span>loadDataEventHandler,
					'OSP_REQUEST_DATA':<span class="nt">&lt;portlet:namespace/&gt;</span>requestDataEventHandler,
					'OSP_RESPONSE_DATA':<span class="nt">&lt;portlet:namespace/&gt;</span>responseDataEventHandler,
					'OSP_INITIALIZE': <span class="nt">&lt;portlet:namespace/&gt;</span>initializeEventHandler,
					'OSP_DISABLE_CONTROLS': <span class="nt">&lt;portlet:namespace/&gt;</span>disableControlsEventHandler
			},
			loadCanvas: <span class="nt">&lt;portlet:namespace/&gt;</span>loadCanvas,
			procFuncs:{
				readServerFile: function( jsonData ){
					console.log('Custom function for readServerFile....');
				}
			},
			disabled: JSON.parse( '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">visualizerConfig</span><span class="err">.</span><span class="na">disabled</span><span class="err">%</span><span class="nt">&gt;</span>')
};

var <span class="nt">&lt;portlet:namespace/&gt;</span>visualizer;
$('#<span class="nt">&lt;portlet:namespace/&gt;</span>canvas').load(function(){
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer = OSP.Visualizer(<span class="nt">&lt;portlet:namespace/&gt;</span>config);
	<span class="nt">&lt;portlet:namespace/&gt;</span>processInitAction( JSON.parse( '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">visualizerConfig</span><span class="err">.</span><span class="na">initData</span><span class="err">%</span><span class="nt">&gt;</span>' ), false );
});
</code></pre></div></div>

<h3 id="24-script-내-글로벌-함수-설정">2.4. script 내 글로벌 함수 설정</h3>
<p>2.3 절이서 설정된 바와 같이, 파일에 대한 처리 부분을 포함하는 함수인 <code class="highlighter-rouge">&lt;portlet:namespace/&gt;loadCanvas</code>와 포틀릿의 타이틀을 설정하는 <code class="highlighter-rouge">&lt;portlet:namespace/&gt;setTitle</code> 함수, 
가시화 모듈의 초기화를 담당하는 함수인 <code class="highlighter-rouge">&lt;portlet:namespace/&gt;processInitAction</code>의 함수 정의가 포함되어 있습니다. <br />
<code class="highlighter-rouge">&lt;portlet:namespace/&gt;visualizer.callIframeFunc</code> 함수의 경우, 해당 이벤트가 발생하였을 때, <code class="highlighter-rouge">&lt;iframe&gt;</code> 태그에서 호출하는 가시화 모듈 내에 존재하는 데이터 로딩 가시화 함수를 지정합니다.<br /></p>

<p><code class="highlighter-rouge">loadVisualFile</code>함수는 실제 가시화를 담당하는 부분의 함수를 의미합니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/***********************************************************************
 * Canvas functions
 ***********************************************************************/
function <span class="nt">&lt;portlet:namespace/&gt;</span>loadCanvas( jsonData, changeAlert ){
	console.log( 'jsonData: ', jsonData, changeAlert );
	
	switch( jsonData.type_){
		case OSP.Enumeration.PathType.FILE:
			<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.readServerFile( jsonData, changeAlert );
			break;
		case OSP.Enumeration.PathType.CONTENT:
		case OSP.Enumeration.PathType.FILE_CONTENT:
			if( jsonData.name_ )
				<span class="nt">&lt;portlet:namespace/&gt;</span>setTitle( OSP.Util.mergePath(jsonData.parent_, jsonData.name_) );
			
			<span class="nt">&lt;portlet:namespace/&gt;</span>setTextEditorContent( Liferay.Util.unescapeHTML(jsonData.content_) );

			if( !<span class="nt">&lt;portlet:namespace/&gt;</span>disabled <span class="err">&amp;&amp;</span> changeAlert )
				<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.fireDataChangedEvent();
			break;
		case OSP.Enumeration.PathType.DLENTRY_ID:
			<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.readDLFileEntry(changeAlert);
			break;
		case OSP.Enumeration.PathType.URL:
			alert( 'Un-supported yet.');
			changeAlert = false;
			break;
		default:
			console.log('Path Type Error: Cannot display with this path type', jsonData );
			changeAlert = false;
			return;
	}
	
};

function <span class="nt">&lt;portlet:namespace/&gt;</span>setTitle( title ){
	$('#<span class="nt">&lt;portlet:namespace/&gt;</span>title').html( '<span class="nt">&lt;h4</span> <span class="na">style=</span><span class="s">"margin:0;"</span><span class="nt">&gt;</span>'+title+'<span class="nt">&lt;/h4&gt;</span>' );
};

function <span class="nt">&lt;portlet:namespace/&gt;</span>processInitAction( jsonInitData, changeAlert ){
	
	if( !jsonInitData.repositoryType_ ){
		// Do nothing if repository is not specified.
		// This means processInitAction will be performed OSP_SHAKEHAND event handler.
		return;  
	}
	
	jsonInitData.user_ = jsonInitData.user_ ? jsonInitData.user_ : '<span class="nt">&lt;</span><span class="err">%=</span><span class="na">user</span><span class="err">.</span><span class="na">getScreenName</span><span class="err">()%</span><span class="nt">&gt;</span>';
	jsonInitData.type_ = jsonInitData.type_ ? jsonInitData.type_ : OSP.Enumeration.PathType.CONTENT;
	jsonInitData.parent_ = jsonInitData.parent_ ? jsonInitData.parent_ : '';
	jsonInitData.name_ = jsonInitData.name_ ? jsonInitData.name_ : '';
	
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.processInitAction( jsonInitData, changeAlert );
}

</code></pre></div></div>

<h3 id="25-editor-개발자-함수-정의">2.5. Editor 개발자 함수 정의</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /***********************************************************************
  * Functions called by iframe jsp 
  ***********************************************************************/
function <span class="nt">&lt;portlet:namespace/&gt;</span>fireDataChangedEvent( content ){
	console.log('fireDataChangedEvent in text editor wrapper...');
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.fireDataChangedEvent({
		type_: 'content',
		content_: content 
	});
};

/***********************************************************************
  * Functions which call iframe functions 
  ***********************************************************************/
function <span class="nt">&lt;portlet:namespace/&gt;</span>setTextEditorContent( content ){
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('setContent', null, content );
}

/***********************************************************************
 * Window Event binding functions 
 ***********************************************************************/

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>sample').click(function(){
	if( <span class="nt">&lt;portlet:namespace/&gt;</span>disabled )
		return;
	
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.fireRequestSampleContentEvent();
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>openLocalFile').click(function(){
	if( <span class="nt">&lt;portlet:namespace/&gt;</span>disabled )
		return;

	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.openLocalFile( true );
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>openServerFile').click(function(){
	if( <span class="nt">&lt;portlet:namespace/&gt;</span>disabled )
		return;

	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.openServerFile(null, true);
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>save').click(function(){
	if( <span class="nt">&lt;portlet:namespace/&gt;</span>disabled )
		return;

	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('getContent', function( content ){
		<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.saveAtServer(content);
	});
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>saveAs').click(function(){
	if( <span class="nt">&lt;portlet:namespace/&gt;</span>disabled )
		return;

	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.saveAtServerAs();
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>saveAtLocal').click(function(){
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('getContent', function( content ){
		<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.saveAtLocal(content, 'text/plain');
	});
});

$('#<span class="nt">&lt;portlet:namespace/&gt;</span>download').click(function(){
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.downloadCurrentFile();
});

/***********************************************************************
 * Handling OSP Events and event handlers
 ***********************************************************************/
function <span class="nt">&lt;portlet:namespace/&gt;</span>loadDataEventHandler( data, params ){
	console.log('[<span class="nt">&lt;portlet:namespace/&gt;</span>loadDataEventHandler] ', data, params );
	
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.loadCanvas( data, params.changeAlert );
}

function <span class="nt">&lt;portlet:namespace/&gt;</span>requestDataEventHandler( data, params ){
	console.log('[<span class="nt">&lt;portlet:namespace/&gt;</span>requestDataEventHandler]', data, params);
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('getContent', function(content){
		<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.fireResponseDataEvent({content_: content}, params );
	});
}

function <span class="nt">&lt;portlet:namespace/&gt;</span>responseDataEventHandler( data, params ){
	console.log('[<span class="nt">&lt;portlet:namespace/&gt;</span>responseDataEventHandler]', data, params);
	
	switch( params.procFunc ){
	case 'readServerFile':
		<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.runProcFuncs( 'readServerFile', data, true );
		break;
	case 'saveAtServerAs':
		<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('getContent', function(content){
			<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.runProcFuncs( 'saveAtServerAs', data.parent_, data.name_, content );
			<span class="nt">&lt;portlet:namespace/&gt;</span>setTitle( OSP.Util.mergePath( data.parent_, data.name_) );
		});
		break;
	}
}

function <span class="nt">&lt;portlet:namespace/&gt;</span>initializeEventHandler( data, params ){
	console.log('[<span class="nt">&lt;portlet:namespace/&gt;</span>initializeEventHandler] ', data, params );
	
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.processInitAction(null, false);
	
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('setContent', null, '' );
	<span class="nt">&lt;portlet:namespace/&gt;</span>setTitle('');
}

function <span class="nt">&lt;portlet:namespace/&gt;</span>disableControlsEventHandler( data, params ){
	console.log('[<span class="nt">&lt;portlet:namespace/&gt;</span>disableControlsEventHandler] ');
	<span class="nt">&lt;portlet:namespace/&gt;</span>disabled = params.disabled;
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.disabled( params.disabled );
	<span class="nt">&lt;portlet:namespace/&gt;</span>visualizer.callIframeFunc('disable', null, params.disabled);
}
</code></pre></div></div>

<h3 id="26-전체-코드">2.6. 전체 코드</h3>

<p>전체 코드를 확인하면 아래와 같습니다.<br /></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;</span><span class="err">%@</span><span class="na">page</span> <span class="na">import=</span><span class="s">"com.kisti.osp.util.OSPVisualizerConfig"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span><span class="na">page</span> <span class="na">import=</span><span class="s">"com.kisti.osp.util.OSPVisualizerUtil"</span><span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;</span><span class="err">%@</span> <span class="na">include</span> <span class="na">file=</span><span class="s">"../init.jsp"</span> <span class="err">%</span><span class="nt">&gt;</span>

<span class="nt">&lt;portlet:resourceURL</span> <span class="na">var=</span><span class="s">"serveResourceURL"</span><span class="nt">&gt;&lt;/portlet:resourceURL&gt;</span>
<span class="nt">&lt;</span><span class="err">%</span>
<span class="na">OSPVisualizerConfig</span> <span class="na">visualizerConfig =</span><span class="err"> </span><span class="s">OSPVisualizerUtil.getVisualizerConfig(renderRequest,</span> <span class="na">portletDisplay</span><span class="err">,</span> <span class="na">user</span><span class="err">);</span>
<span class="err">%</span><span class="nt">&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-fluid osp-visualizer"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row-fluid osp-header"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-10"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;title"</span> <span class="na">class=</span><span class="s">"osp-title"</span><span class="nt">&gt;&lt;/div&gt;</span>
		<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-2 osp-menu"</span>  <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;menu"</span><span class="nt">&gt;</span>
			<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"dropdown text-right"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary dropdown-toggle"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">data-toggle=</span><span class="s">"dropdown"</span><span class="nt">&gt;</span>
					Menu<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"caret"</span><span class="nt">&gt;&lt;/span&gt;</span>
   				<span class="nt">&lt;/button&gt;</span>
				<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"dropdown-menu dropdown-menu-right"</span><span class="nt">&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;sample"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Sample<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;openLocalFile"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Open local file<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;openServerFile"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Open Server file<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;save"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;saveAs"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save as...<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;saveAtLocal"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-file"</span><span class="nt">&gt;&lt;/i&gt;</span>Save at local<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                       <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;download"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-download-alt"</span><span class="nt">&gt;&lt;/i&gt;</span> Download<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>					
				<span class="nt">&lt;/ul&gt;</span>
			<span class="nt">&lt;/div&gt;</span>
		<span class="nt">&lt;/div&gt;</span>	
	<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row-fluid osp-frame"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;iframe</span> 
				<span class="na">class=</span><span class="s">"col-sm-12 osp-iframe-canvas"</span>  
				<span class="na">style=</span><span class="s">"&lt;%=visualizerConfig.getDisplayStyle()%&gt;border:solid #eeeeee 1px;"</span> 
				<span class="na">id=</span><span class="s">"&lt;portlet:namespace/&gt;canvas"</span> 
				<span class="na">src=</span><span class="s">"&lt;%=request.getContextPath()%&gt;/html/TextEditor/text-editor.jsp"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;/iframe&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="cm">/***********************************************************************
 * Global variables and initialization section
 ***********************************************************************/</span>
 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">'== LIFERAY =='</span><span class="p">,</span> <span class="nx">Liferay</span> <span class="p">);</span>
 
<span class="kd">var</span> <span class="o">&lt;</span><span class="nx">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'&lt;portlet:namespace/&gt;canvas'</span><span class="p">);</span>
<span class="kd">var</span> <span class="o">&lt;</span><span class="nx">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="s1">'&lt;%=visualizerConfig.disabled%&gt;'</span><span class="p">);</span>

<span class="kd">var</span> <span class="o">&lt;</span><span class="nx">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
			<span class="na">namespace</span><span class="p">:</span> <span class="s1">'&lt;portlet:namespace/&gt;'</span><span class="p">,</span>
			<span class="na">displayCanvas</span><span class="p">:</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">canvas</span><span class="p">,</span>
			<span class="na">portletId</span><span class="p">:</span> <span class="s1">'&lt;%=portletDisplay.getId()%&gt;'</span><span class="p">,</span>
			<span class="na">connector</span><span class="p">:</span> <span class="s1">'&lt;%=visualizerConfig.connector%&gt;'</span><span class="p">,</span>
			<span class="na">menuOptions</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">'&lt;%=visualizerConfig.menuOptions%&gt;'</span><span class="p">),</span> 
			<span class="na">resourceURL</span><span class="p">:</span> <span class="s1">'&lt;%=serveResourceURL%&gt;'</span><span class="p">,</span>
			<span class="na">eventHandlers</span><span class="p">:</span> <span class="p">{</span>
					<span class="s1">'OSP_LOAD_DATA'</span><span class="p">:</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">loadDataEventHandler</span><span class="p">,</span>
					<span class="s1">'OSP_REQUEST_DATA'</span><span class="p">:</span><span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">requestDataEventHandler</span><span class="p">,</span>
					<span class="s1">'OSP_RESPONSE_DATA'</span><span class="p">:</span><span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">responseDataEventHandler</span><span class="p">,</span>
					<span class="s1">'OSP_INITIALIZE'</span><span class="p">:</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">initializeEventHandler</span><span class="p">,</span>
					<span class="s1">'OSP_DISABLE_CONTROLS'</span><span class="p">:</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disableControlsEventHandler</span>
			<span class="p">},</span>
			<span class="na">loadCanvas</span><span class="p">:</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">loadCanvas</span><span class="p">,</span>
			<span class="na">procFuncs</span><span class="p">:{</span>
				<span class="na">readServerFile</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">jsonData</span> <span class="p">){</span>
					<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Custom function for readServerFile....'</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">},</span>
			<span class="na">disabled</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="s1">'&lt;%=visualizerConfig.disabled%&gt;'</span><span class="p">)</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">;</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;canvas'</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span> <span class="o">=</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Visualizer</span><span class="p">(</span><span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">config</span><span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">processInitAction</span><span class="p">(</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="s1">'&lt;%=visualizerConfig.initData%&gt;'</span> <span class="p">),</span> <span class="kc">false</span> <span class="p">);</span>
<span class="p">});</span>
	
<span class="cm">/***********************************************************************
 * Canvas functions
 ***********************************************************************/</span>
<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">loadCanvas</span><span class="p">(</span> <span class="nx">jsonData</span><span class="p">,</span> <span class="nx">changeAlert</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">'jsonData: '</span><span class="p">,</span> <span class="nx">jsonData</span><span class="p">,</span> <span class="nx">changeAlert</span> <span class="p">);</span>
	
	<span class="k">switch</span><span class="p">(</span> <span class="nx">jsonData</span><span class="p">.</span><span class="nx">type_</span><span class="p">){</span>
		<span class="k">case</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="na">FILE</span><span class="p">:</span>
			<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">readServerFile</span><span class="p">(</span> <span class="nx">jsonData</span><span class="p">,</span> <span class="nx">changeAlert</span> <span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="na">CONTENT</span><span class="p">:</span>
		<span class="k">case</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="na">FILE_CONTENT</span><span class="p">:</span>
			<span class="k">if</span><span class="p">(</span> <span class="nx">jsonData</span><span class="p">.</span><span class="nx">name_</span> <span class="p">)</span>
				<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTitle</span><span class="p">(</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">mergePath</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">.</span><span class="nx">parent_</span><span class="p">,</span> <span class="nx">jsonData</span><span class="p">.</span><span class="nx">name_</span><span class="p">)</span> <span class="p">);</span>
			
			<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTextEditorContent</span><span class="p">(</span> <span class="nx">Liferay</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">unescapeHTML</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">.</span><span class="nx">content_</span><span class="p">)</span> <span class="p">);</span>

			<span class="k">if</span><span class="p">(</span> <span class="o">!&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="o">&amp;&amp;</span> <span class="nx">changeAlert</span> <span class="p">)</span>
				<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">fireDataChangedEvent</span><span class="p">();</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="na">DLENTRY_ID</span><span class="p">:</span>
			<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">readDLFileEntry</span><span class="p">(</span><span class="nx">changeAlert</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="na">URL</span><span class="p">:</span>
			<span class="nx">alert</span><span class="p">(</span> <span class="s1">'Un-supported yet.'</span><span class="p">);</span>
			<span class="nx">changeAlert</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="nl">default</span><span class="p">:</span>
			<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Path Type Error: Cannot display with this path type'</span><span class="p">,</span> <span class="nx">jsonData</span> <span class="p">);</span>
			<span class="nx">changeAlert</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
			<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span>
	
<span class="p">};</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTitle</span><span class="p">(</span> <span class="nx">title</span> <span class="p">){</span>
	<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;title'</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span> <span class="s1">'&lt;h4 style="margin:0;"&gt;'</span><span class="o">+</span><span class="nx">title</span><span class="o">+</span><span class="s1">'&lt;/h4&gt;'</span> <span class="p">);</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">processInitAction</span><span class="p">(</span> <span class="nx">jsonInitData</span><span class="p">,</span> <span class="nx">changeAlert</span> <span class="p">){</span>
	
	<span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">repositoryType_</span> <span class="p">){</span>
		<span class="c1">// Do nothing if repository is not specified.</span>
		<span class="c1">// This means processInitAction will be performed OSP_SHAKEHAND event handler.</span>
		<span class="k">return</span><span class="p">;</span>  
	<span class="p">}</span>
	
	<span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">user_</span> <span class="o">=</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">user_</span> <span class="p">?</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">user_</span> <span class="p">:</span> <span class="s1">'&lt;%=user.getScreenName()%&gt;'</span><span class="p">;</span>
	<span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">type_</span> <span class="o">=</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">type_</span> <span class="p">?</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">type_</span> <span class="p">:</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Enumeration</span><span class="p">.</span><span class="nx">PathType</span><span class="p">.</span><span class="nx">CONTENT</span><span class="p">;</span>
	<span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">parent_</span> <span class="o">=</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">parent_</span> <span class="p">?</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">parent_</span> <span class="p">:</span> <span class="s1">''</span><span class="p">;</span>
	<span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">name_</span> <span class="o">=</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">name_</span> <span class="p">?</span> <span class="nx">jsonInitData</span><span class="p">.</span><span class="nx">name_</span> <span class="p">:</span> <span class="s1">''</span><span class="p">;</span>
	
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">processInitAction</span><span class="p">(</span> <span class="nx">jsonInitData</span><span class="p">,</span> <span class="nx">changeAlert</span> <span class="p">);</span>
<span class="p">}</span>


 <span class="cm">/***********************************************************************
  * Functions called by iframe jsp 
  ***********************************************************************/</span>
<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">fireDataChangedEvent</span><span class="p">(</span> <span class="nx">content</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fireDataChangedEvent in text editor wrapper...'</span><span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">fireDataChangedEvent</span><span class="p">({</span>
		<span class="na">type_</span><span class="p">:</span> <span class="s1">'content'</span><span class="p">,</span>
		<span class="na">content_</span><span class="p">:</span> <span class="nx">content</span> 
	<span class="p">});</span>
<span class="p">};</span>

<span class="cm">/***********************************************************************
  * Functions which call iframe functions 
  ***********************************************************************/</span>
<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTextEditorContent</span><span class="p">(</span> <span class="nx">content</span> <span class="p">){</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'setContent'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">content</span> <span class="p">);</span>
<span class="p">}</span>

<span class="cm">/***********************************************************************
 * Window Event binding functions 
 ***********************************************************************/</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;sample'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>
	
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">fireRequestSampleContentEvent</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;openLocalFile'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">openLocalFile</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;openServerFile'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">openServerFile</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;save'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'getContent'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">content</span> <span class="p">){</span>
		<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">saveAtServer</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;saveAs'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="k">if</span><span class="p">(</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="p">)</span>
		<span class="k">return</span><span class="p">;</span>

	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">saveAtServerAs</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;saveAtLocal'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'getContent'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">content</span> <span class="p">){</span>
		<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">saveAtLocal</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="s1">'text/plain'</span><span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="s1">'#&lt;portlet:namespace/&gt;download'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">downloadCurrentFile</span><span class="p">();</span>
<span class="p">});</span>

<span class="cm">/***********************************************************************
 * Handling OSP Events and event handlers
 ***********************************************************************/</span>
<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">loadDataEventHandler</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'[&lt;portlet:namespace/&gt;loadDataEventHandler] '</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">);</span>
	
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">loadCanvas</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">changeAlert</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">requestDataEventHandler</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'[&lt;portlet:namespace/&gt;requestDataEventHandler]'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'getContent'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="p">){</span>
		<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">fireResponseDataEvent</span><span class="p">({</span><span class="na">content_</span><span class="p">:</span> <span class="nx">content</span><span class="p">},</span> <span class="nx">params</span> <span class="p">);</span>
	<span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">responseDataEventHandler</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'[&lt;portlet:namespace/&gt;responseDataEventHandler]'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
	
	<span class="k">switch</span><span class="p">(</span> <span class="nx">params</span><span class="p">.</span><span class="nx">procFunc</span> <span class="p">){</span>
	<span class="k">case</span> <span class="s1">'readServerFile'</span><span class="p">:</span>
		<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">runProcFuncs</span><span class="p">(</span> <span class="s1">'readServerFile'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="k">case</span> <span class="s1">'saveAtServerAs'</span><span class="p">:</span>
		<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'getContent'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">content</span><span class="p">){</span>
			<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">runProcFuncs</span><span class="p">(</span> <span class="s1">'saveAtServerAs'</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">parent_</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name_</span><span class="p">,</span> <span class="nx">content</span> <span class="p">);</span>
			<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTitle</span><span class="p">(</span> <span class="nx">OSP</span><span class="p">.</span><span class="nx">Util</span><span class="p">.</span><span class="nx">mergePath</span><span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">parent_</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name_</span><span class="p">)</span> <span class="p">);</span>
		<span class="p">});</span>
		<span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">initializeEventHandler</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'[&lt;portlet:namespace/&gt;initializeEventHandler] '</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">);</span>
	
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">processInitAction</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
	
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'setContent'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">''</span> <span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">setTitle</span><span class="p">(</span><span class="s1">''</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disableControlsEventHandler</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">params</span> <span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'[&lt;portlet:namespace/&gt;disableControlsEventHandler] '</span><span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">disabled</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">disabled</span><span class="p">;</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">disabled</span><span class="p">(</span> <span class="nx">params</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">);</span>
	<span class="o">&lt;</span><span class="na">portlet</span><span class="p">:</span><span class="nx">namespace</span><span class="o">/&gt;</span><span class="nx">visualizer</span><span class="p">.</span><span class="nx">callIframeFunc</span><span class="p">(</span><span class="s1">'disable'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">params</span><span class="p">.</span><span class="nx">disabled</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_workbench.html" class="btn btn-default navbar-btn cursorNorm" role="button">workbench</a>
        
        
        
        
        
    </div>



    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'https-sp-edison-github-io'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2019 KISTI. All rights reserved.
 Site last generated: Nov 28, 2019 <br />
<p><img src="images/kisti_logo.png" alt="Company logo" style="margin-right: 15px !important;"/>
  <img src="images/edison_logo.png" alt="Company logo" /></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-115782577-19','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
